<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="./src/assets/img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bruno Pesenti</title>
    <!-- NUCLEAR CLEANUP - This runs FIRST before anything else -->
    <script>
      (function() {
        try {
          console.log('[HTML INIT] Cleaning corrupted localStorage');
          
          // Force remove cart if it's corrupted
          const cart = localStorage.getItem('cart');
          if (cart) {
            const trimmed = cart.trim();
            // If it's not valid JSON array/object, DELETE IT
            if (trimmed === '10' || trimmed === '"10"' || !trimmed.startsWith('[') && !trimmed.startsWith('{')) {
              console.warn('[HTML INIT] Removing corrupted cart:', trimmed);
              localStorage.removeItem('cart');
            } else {
              try {
                JSON.parse(trimmed);
              } catch (e) {
                console.warn('[HTML INIT] Cart JSON is invalid, removing:', e);
                localStorage.removeItem('cart');
              }
            }
          }
        } catch (error) {
          console.error('[HTML INIT] Error:', error);
        }
      })();
    </script>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
