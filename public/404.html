<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Redirection...</title>
    <script>
      // Get the path that was requested
      var path = window.location.pathname;
      var search = window.location.search;
      var hash = window.location.hash;
      
      // Log for debugging
      console.log('[404] Handling request for:', path + search + hash);
      
      // Detect if this is a product detail page (e.g., /fr/produits/productId)
      var productMatch = path.match(/\/(fr|en|it)?\/produits\/([a-f0-9]{24})/);
      
      if (productMatch) {
        // This is a product detail page - redirect to produits page with product ID
        var lang = productMatch[1] || 'fr';
        var productId = productMatch[2];
        console.log('[404] Detected product page - lang:', lang, 'productId:', productId);
        // Redirect to main index.html and let Vue Router handle it
        window.location.replace('/' + (lang !== 'fr' ? lang + '/' : '') + 'index.html?redirect=' + encodeURIComponent(path + search + hash));
      } else {
        // For any other 404, redirect to index.html with the original path
        console.log('[404] Generic redirect to index.html');
        window.location.replace('/index.html?redirect=' + encodeURIComponent(path + search + hash));
      }
    </script>
  </head>
  <body>
    <p>Redirecting...</p>
  </body>
</html>